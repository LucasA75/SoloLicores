(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[323],{420:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/categoria",function(){return r(4945)}])},4945:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return j}});var a=r(5893),n=r(7294);let s=e=>{let{categorias:t,setCategorias:r}=e,[s,i]=(0,n.useState)(""),[o,c]=(0,n.useState)(""),l=async e=>{try{e.preventDefault();let a=await fetch("http://localhost:3000/categoria",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:s,descripcion:o})});if(!a.ok)throw Error("No se pudo guardar la categoria");let n=await a.json();console.dir(n),r([...t,n])}catch(e){console.error(e)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("form",{action:"form",method:"post",onSubmit:l,children:[(0,a.jsx)("label",{htmlFor:"nombre",children:"Nombre"}),(0,a.jsx)("input",{type:"text",id:"nombre",value:s,onChange:e=>i(e.target.value)}),(0,a.jsx)("label",{children:"Descripcion"}),(0,a.jsx)("textarea",{value:o,onChange:e=>c(e.target.value)}),(0,a.jsx)("button",{type:"submit",children:"Guardar"})]}),"Nombre : ",s," | Descripcion : ",o]})},i=e=>{let{categorias:t,setCategorias:r}=e;(0,n.useEffect)(()=>{let e=async()=>{try{let e=await fetch("http://localhost:3000/categoria");if(!e.ok)throw Error("Problemas al recuperar las categorias!");let t=await e.json();r(t)}catch(e){console.error(e)}};e()},[t,r]);let s=async e=>{try{let t="http://localhost:3000/categoria?id="+e.id,r=await fetch(t,{method:"DELETE"});if(!r.ok)throw Error("Problemas al eliminar la categoria!")}catch(e){console.error(e)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{children:"Listado de Categorias"}),(0,a.jsxs)("table",{border:1,children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Id"}),(0,a.jsx)("th",{children:"Nombre"}),(0,a.jsx)("th",{children:"Descripcion"}),(0,a.jsx)("th",{children:"Acciones"})]})}),(0,a.jsx)("tbody",{children:t.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.id}),(0,a.jsx)("td",{children:e.nombre}),(0,a.jsx)("td",{children:e.descripcion}),(0,a.jsxs)("td",{children:[(0,a.jsx)("button",{children:"Editar"}),(0,a.jsx)("button",{onClick:()=>s(e),children:"Eliminar"})]})]},e.id))})]})]})},o=()=>(0,a.jsx)("div",{children:"Header"}),c=()=>(0,a.jsx)("div",{children:"Footer"}),l=e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o,{}),e.children,(0,a.jsx)(c,{})]});function h(e){let[t,r]=(0,n.useState)([]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s,{categorias:t,setCategorias:r}),(0,a.jsx)("hr",{}),(0,a.jsx)(i,{categorias:t,setCategorias:r})]})}let d=()=>(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(l,{children:[(0,a.jsx)("h1",{className:"titulo",children:"Categoria"}),(0,a.jsx)(h,{})]})});var j=d}},function(e){e.O(0,[774,888,179],function(){return e(e.s=420)}),_N_E=e.O()}]);